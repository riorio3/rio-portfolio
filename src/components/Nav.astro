---
const links = [
  { href: '/projects', label: 'Projects' },
  { href: '/blog', label: 'Blog' },
  { href: '/about', label: 'About' },
];

const currentPath = Astro.url.pathname;
---

<div class="fixed top-0 left-0 right-0 z-50 flex justify-center pt-5 px-4">
  <nav class="nav-bar">
    <div class="nav-inner">
      <a href="/" class="nav-logo-wrapper">
        <span class="nav-logo-border"></span>
        <span class="nav-logo-content">RZ</span>
      </a>

      <!-- Desktop links -->
      <div class="hidden sm:flex items-center gap-1">
        {links.map(link => (
          <a
            href={link.href}
            class:list={[
              'nav-link',
              currentPath === link.href && 'nav-link-active',
            ]}
          >
            {link.label}
          </a>
        ))}
      </div>

      <!-- Mobile hamburger -->
      <button
        id="menu-toggle"
        class="sm:hidden text-[--color-muted] hover:text-white transition-colors p-1"
        aria-label="Toggle menu"
      >
        <svg id="menu-open-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg id="menu-close-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Mobile menu -->
    <div id="mobile-menu" class="hidden sm:hidden border-t border-white/5 mt-2 pt-3 pb-1 px-2">
      {links.map(link => (
        <a
          href={link.href}
          class:list={[
            'nav-link block',
            currentPath === link.href && 'nav-link-active',
          ]}
        >
          {link.label}
        </a>
      ))}
    </div>
  </nav>
</div>

<style>
  .nav-bar {
    background: linear-gradient(145deg, #1a1a1a, #111111);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 1rem;
    padding: 0.25rem;
    box-shadow:
      0 2px 20px rgba(0, 0, 0, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.04);
    min-width: min(520px, calc(100vw - 2rem));
  }

  .nav-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.25rem;
    padding: 0.25rem;
  }

  @keyframes liquid-flow {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  .nav-logo-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.75rem;
    height: 2.75rem;
    border-radius: 0.75rem;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .nav-logo-border {
    position: absolute;
    inset: 0;
    border-radius: 0.75rem;
    padding: 2.5px;
    background: linear-gradient(
      130deg,
      #7a5a0a,
      #b8860b,
      #d4a020,
      #e6be44,
      #f5d76e,
      #e6be44,
      #d4a020,
      #b8860b,
      #7a5a0a,
      #b8860b,
      #d4a020,
      #e6be44
    );
    background-size: 300% 300%;
    animation: liquid-flow 4s ease infinite;
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }

  .nav-logo-content {
    position: relative;
    z-index: 1;
    font-weight: 700;
    font-size: 0.8rem;
    letter-spacing: 0.05em;
    color: var(--color-gold-light);
    text-shadow: 0 0 8px rgba(184, 134, 11, 0.3);
  }

  .nav-logo-wrapper::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 0.75rem;
    background: linear-gradient(145deg, #1e1e1e, #111111);
    z-index: 0;
  }

  .nav-logo-wrapper:hover .nav-logo-border {
    animation-duration: 2s;
    filter: brightness(1.3);
  }

  .nav-logo-wrapper:hover {
    box-shadow: 0 0 20px rgba(184, 134, 11, 0.2);
  }

  .nav-link {
    padding: 0.5rem 0.875rem;
    border-radius: 0.5rem;
    font-size: 0.8125rem;
    color: #737373;
    transition: all 0.2s ease;
    text-decoration: none;
  }

  .nav-link:hover {
    color: #d4d4d4;
    background: rgba(255, 255, 255, 0.04);
  }

  .nav-link-active {
    color: var(--color-gold-light);
    background: linear-gradient(145deg, #1e1e1e, #141414);
    box-shadow:
      inset 0 1px 2px rgba(0, 0, 0, 0.3),
      0 1px 0 rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(184, 134, 11, 0.2);
  }
</style>

<script>
  const toggle = document.getElementById('menu-toggle');
  const menu = document.getElementById('mobile-menu');
  const openIcon = document.getElementById('menu-open-icon');
  const closeIcon = document.getElementById('menu-close-icon');

  toggle?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
    openIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
  });
</script>
